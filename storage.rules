
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    match /assignments/{assignmentId}/{allPaths=**} {
      // Allow read access for any authenticated user (e.g., students)
      allow read: if request.auth != null;
      
      // Allow write access only for the faculty member who created the assignment.
      // This rule checks the 'facultyId' field in the corresponding Firestore document.
      allow write: if request.auth != null && get(/databases/(default)/documents/assignments/$(assignmentId)).data.facultyId == request.auth.uid;
    }
  }
}
